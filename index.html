<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Cofre Mágico</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            text-align: center;
        }
        .container {
            max-width: 90%;
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        p {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }
        .chest {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Treasure_chest_closed.svg/1024px-Treasure_chest_closed.svg.png') no-repeat center;
            background-size: contain;
        }
        .open {
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Treasure_chest_open.svg/1024px-Treasure_chest_open.svg.png') no-repeat center;
            background-size: contain;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>El Cofre Mágico</h1>
        <p>Sacude tu dispositivo para abrir el cofre y descubrir el tesoro escondido.</p>
        <div id="chest" class="chest"></div>
        <p id="message"></p>
    </div>

    <script>
        let shakeThreshold = 15; // Umbral para detectar sacudidas
        let lastTime = 0;

        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', (event) => {
                const acceleration = event.acceleration;
                const currentTime = Date.now();

                if ((currentTime - lastTime) > 100) { // Reducir frecuencia de detección
                    lastTime = currentTime;

                    const delta = Math.sqrt(
                        (acceleration.x || 0) ** 2 +
                        (acceleration.y || 0) ** 2 +
                        (acceleration.z || 0) ** 2
                    );

                    if (delta > shakeThreshold) {
                        openChest();
                    }
                }
            });
        } else {
            document.getElementById('message').textContent = 'Tu dispositivo no soporta detección de movimiento.';
        }

        function openChest() {
            const chest = document.getElementById('chest');
            const message = document.getElementById('message');

            if (!chest.classList.contains('open')) {
                chest.classList.add('open');
                message.textContent = '¡Has abierto el cofre y encontrado el tesoro escondido!';
            }
        }
    </script>
</body>
</html>
