<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de Habitación 3D</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            background: #000;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="roomCanvas"></canvas>

    <script>
        const canvas = document.getElementById('roomCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let alpha = 0;  // Ángulo de rotación (yaw)
        let beta = 0;   // Ángulo de inclinación (pitch)
        let gamma = 0;  // Ángulo de giro lateral (roll)

        // Colores de las paredes y el techo/suelo
        const colors = {
            floor: 'white',
            ceiling: 'gray',
            leftWall: 'blue',
            rightWall: 'red',
            frontWall: 'green',
            backWall: 'yellow',
        };

        // Escuchar los eventos de orientación del dispositivo
        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', (event) => {
                // Obtenemos los ángulos de rotación
                alpha = event.alpha || 0;
                beta = event.beta || 0;
                gamma = event.gamma || 0;
                drawRoom();
            });
        } else {
            alert('Tu dispositivo no soporta detección de orientación.');
        }

        function drawRoom() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height / 2); // Centro de la pantalla

            // Calculamos la perspectiva para el efecto 3D
            const perspective = 1000; // Distancia de perspectiva

            // Paredes
            drawWall(-500, -500, colors.frontWall, 0, 0, 1);  // Pared del frente
            drawWall(500, -500, colors.backWall, 0, 0, -1);  // Pared del fondo
            drawWall(-500, 500, colors.leftWall, 1, 0, 0);   // Pared izquierda
            drawWall(500, 500, colors.rightWall, -1, 0, 0);   // Pared derecha

            // Techo y suelo
            drawFloorOrCeiling(perspective, colors.floor, 0, -1);  // Suelo
            drawFloorOrCeiling(perspective, colors.ceiling, 0, 1); // Techo

            ctx.restore();
        }

        // Función para dibujar una pared (rectángulo en perspectiva)
        function drawWall(xOffset, yOffset, color, rotationX, rotationY, rotationZ) {
            ctx.save();
            ctx.rotateX(rotationX * beta * Math.PI / 180);
            ctx.rotateY(rotationY * alpha * Math.PI / 180);
            ctx.rotateZ(rotationZ * gamma * Math.PI / 180);

            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(xOffset, yOffset);
            ctx.lineTo(xOffset + 500, yOffset);
            ctx.lineTo(xOffset + 500, yOffset + 500);
            ctx.lineTo(xOffset, yOffset + 500);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // Función para dibujar el suelo o el techo
        function drawFloorOrCeiling(perspective, color, rotateX, rotateY) {
            ctx.save();
            ctx.rotateX(rotateX * Math.PI / 180);
            ctx.rotateY(rotateY * Math.PI / 180);
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(-perspective, -perspective);
            ctx.lineTo(perspective, -perspective);
            ctx.lineTo(perspective, perspective);
            ctx.lineTo(-perspective, perspective);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // Iniciar el dibujo de la habitación
        drawRoom();
    </script>
</body>
</html>
